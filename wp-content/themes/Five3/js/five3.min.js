jQuery("html").toggleClass("hasjs");(function(a){var b=0,c,d=navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)/i);a(document).ready(function(a){a.updatePageNav();c=a("#wrapper .content-container");c.each(function(){a(this).loadElements()});if(!d){c.each(function(){a(this).parallax()});a(window).bind("scroll",function(b){c.each(function(){if(a(this).isInViewport()){a(this).parallax()}})});a(window).bind("scroll",a.throttle(300,function(){a.updatePageNav()}))}a("nav#page a, a[href*=#]").smoothScroll({easing:"swing",excludeWithin:[".slidedeck-frame"],speed:1600,afterScroll:function(){if(a(this.hash).length>0){var b=window.History,c=a(this).attr("href");if(b.enabled&&!a.browser.msie){b.pushState({href:1},c,c)}}else{window.location.href=a(this).attr("href")}}});a("iframe, embed, object").not(".unresponsive").each(function(){a(this).removeAttr("width");a(this).removeAttr("height");a(this).wrap('<div class="responsive" />')});a("#wp-admin-bar-five3-designer").one("click",function(){a.getScript(five3.templateUri+"js/theme-designer.js",function(){a("#wp-admin-bar-five3-designer").addClass("loaded");return a.toggleDesigner()});return false});a("#wp-admin-bar-five3-designer.loaded, #theme-designer h2 span").live("click",function(){return a.toggleDesigner()});if(d){a(window).bind("load orientationchange",function(b){var d="50%",e=a("#branding").outerHeight(true);c.each(function(b){var c=a(this),f=a(".overlay",c),g=c.outerHeight(true)+a("#branding").outerHeight(true);if(a("#branding").hasClass("shadow-container"))e=e-10;if(c.css("backgroundImage")!=undefined&&c.css("backgroundImage")!="none"){c.css({backgroundPosition:d+" "+e+"px","-webkit-background-size":"auto "+g+"px"})}if(f.css("backgroundImage")!=undefined&&f.css("backgroundImage")!="none"){a(".overlay",this).css({backgroundPosition:d+" "+e+"px","-webkit-background-size":"auto "+g+"px",opacity:1})}c.css({opacity:1});if(e==a("#branding").outerHeight(true))e=c.outerHeight(true);else e+=c.outerHeight(true)})})}});a.fn.extend({loadElements:function(){var b=a(this);if(b.css("opacity")==0){var c=b.height()/5*4;b.next(".preloader").css({top:-c+"px"})}if(b.css("backgroundImage")==undefined||b.css("backgroundImage")=="none"){b.next(".preloader").addClass("loaded").fadeOut(400);b.animate({opacity:1},400)}else{var d=new Image;a(d).one("load",function(){b.next(".preloader").addClass("loaded").fadeOut(400,function(){b.animate({opacity:1},400)})});d.src=b.css("backgroundImage").replace(/(url\(|\)|'|")/gi,"");if(d.complete){a(d).load()}d=null}},parallax:function(){if(a(this).css("backgroundImage")!=undefined&&a(this).css("backgroundImage")!="none"){var b="50% "+ -(a(window).scrollTop()-a(this).offset().top)*.15+"px";a(this).css({backgroundPosition:b})}if(a(".overlay",a(this)).css("backgroundImage")!=undefined&&a(".overlay",a(this)).css("backgroundImage")!="none"){var c="50% "+(a(window).height()/2-(a(window).height()+a(window).scrollTop()-a(this).offset().top)/3-120)+"px";a(".overlay",a(this)).css("backgroundPosition",c)}},isInViewport:function(){if(a(window).scrollTop()>=a(this).offset().top+a(this).height())return false;else if(a(window).height()+a(window).scrollTop()<=a(this).offset().top)return false;else return true}});a.extend({updatePageNav:function(){a("nav#page li a").each(function(c,d){var e=a(a(this).attr("href")),f=e.offset().top,g=e.offset().top+e.height();if(b<a(window).scrollTop()){linkTop=a(this).offset().top+2*a(this).height()}else{linkTop=a(this).offset().top}if(linkTop>=f&&linkTop<g){b=a(window).scrollTop();a(".in-viewport").removeClass("in-viewport");var h=a(this).attr("href").substring(1)+"-link";a("."+h).addClass("in-viewport");return false}a(".in-viewport").removeClass("in-viewport")})},toggleDesigner:function(){if(a("#wp-admin-bar-five3-designer").hasClass("selected")){a("#wp-admin-bar-five3-designer").removeClass("selected");a("#theme-designer").fadeOut(200)}else{a("#wp-admin-bar-five3-designer").addClass("selected");a("#theme-designer").fadeIn(200)}return false}})})(jQuery)